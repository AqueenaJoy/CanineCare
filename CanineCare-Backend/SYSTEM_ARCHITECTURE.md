# ğŸ—ï¸ CanineCare+ System Architecture

## ğŸ“Š High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DOG COLLAR DEVICE                        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚   DS18B20    â”‚  â”‚   MPU6050    â”‚  â”‚   NEO-6M     â”‚          â”‚
â”‚  â”‚ Temperature  â”‚  â”‚Accelerometer â”‚  â”‚     GPS      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                  â”‚                  â”‚                  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                            â”‚                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                    â”‚     ESP32      â”‚                           â”‚
â”‚                    â”‚ Microcontrollerâ”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                            â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ WiFi (HTTP/REST)
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BACKEND SERVER                              â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Flask API Server                       â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚   Health    â”‚  â”‚  Fertility  â”‚  â”‚  Location   â”‚      â”‚  â”‚
â”‚  â”‚  â”‚  Monitoring â”‚  â”‚ Prediction  â”‚  â”‚  Tracking   â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚  â”‚  â”‚  Behavior   â”‚  â”‚  Emergency  â”‚  â”‚    Alert    â”‚      â”‚  â”‚
â”‚  â”‚  â”‚  Analysis   â”‚  â”‚  Detection  â”‚  â”‚  Management â”‚      â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Machine Learning Models                      â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚  â”‚ First Heat Model â”‚    â”‚ Next Heat Model  â”‚           â”‚  â”‚
â”‚  â”‚  â”‚  (RÂ² = 0.78)     â”‚    â”‚  (RÂ² = 0.94)     â”‚           â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   Data Storage                            â”‚  â”‚
â”‚  â”‚                                                            â”‚  â”‚
â”‚  â”‚  â€¢ Sensor Data Buffer (100 readings)                     â”‚  â”‚
â”‚  â”‚  â€¢ Alert History (200 alerts)                            â”‚  â”‚
â”‚  â”‚  â€¢ Dog Profiles                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ HTTP/REST API
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MOBILE APPLICATION                          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚     Home     â”‚  â”‚    Health    â”‚  â”‚  Fertility   â”‚          â”‚
â”‚  â”‚   Dashboard  â”‚  â”‚   Monitor    â”‚  â”‚  Prediction  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚   Location   â”‚  â”‚    Alerts    â”‚                            â”‚
â”‚  â”‚   Tracking   â”‚  â”‚   History    â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

### 1. Sensor Data Collection Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DS18B20    â”‚ â”€â”€â”
â”‚ (Temp)      â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MPU6050    â”‚ â”€â”€â”¼â”€â”€â”€â†’â”‚    ESP32    â”‚â”€â”€â”€â†’â”‚   WiFi      â”‚
â”‚ (Activity)  â”‚   â”‚    â”‚  Process &  â”‚    â”‚ Transmit    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚   Format    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                              â”‚
â”‚   NEO-6M    â”‚ â”€â”€â”˜                              â–¼
â”‚   (GPS)     â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚ Backend Server  â”‚
                                        â”‚  â€¢ ThingSpeak   â”‚
                                        â”‚  â€¢ REST API     â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Health Monitoring Flow

```
Temperature + Activity Data
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Backend   â”‚
    â”‚  Analysis   â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â†’ Normal Range Check
          â”œâ”€â”€â†’ Fever Detection
          â”œâ”€â”€â†’ Hypothermia Detection
          â”œâ”€â”€â†’ Activity Analysis
          â”œâ”€â”€â†’ Combined Analysis
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Generate  â”‚
    â”‚   Alerts &  â”‚
    â”‚Recommendationsâ”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Mobile    â”‚
    â”‚     App     â”‚
    â”‚   Display   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Fertility Prediction Flow

```
User Input (Breed, Age, Weight, Last Heat)
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Backend   â”‚
    â”‚   Encode    â”‚
    â”‚   Features  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ML Model  â”‚
    â”‚  Inference  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â†’ First Heat Model (if puppy)
          â””â”€â”€â†’ Next Heat Model (if adult)
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Calculate  â”‚
    â”‚   Dates &   â”‚
    â”‚   Status    â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Return    â”‚
    â”‚ Prediction  â”‚
    â”‚   Results   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Emergency Detection Flow

```
Sensor Data Stream
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Monitor   â”‚
    â”‚ Conditions  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”œâ”€â”€â†’ Critical Temp? â”€â”€â”
          â”œâ”€â”€â†’ Immobile >1hr? â”€â”€â”¤
          â”œâ”€â”€â†’ Geofence Breach? â”¤
          â”œâ”€â”€â†’ Fever+Lethargy? â”€â”¤
          â”‚                      â”‚
          â–¼                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Normal    â”‚      â”‚  EMERGENCY  â”‚
    â”‚  Continue   â”‚      â”‚   ALERT!    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   Notify    â”‚
                         â”‚    User     â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ Hardware Architecture

### ESP32 Pin Configuration

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
         3.3V â”€â”€â”€â”€â”€â”€â”¤ 3.3V        GND â”œâ”€â”€â”€â”€â”€â”€ GND
                    â”‚                 â”‚
    DS18B20 â”€â”€â”€â”€â”€â”€â”€â”€â”¤ GPIO 4          â”‚
    (Data)          â”‚                 â”‚
                    â”‚                 â”‚
    MPU6050 â”€â”€â”€â”€â”€â”€â”€â”€â”¤ GPIO 21 (SDA)   â”‚
    (SDA)           â”‚                 â”‚
                    â”‚                 â”‚
    MPU6050 â”€â”€â”€â”€â”€â”€â”€â”€â”¤ GPIO 22 (SCL)   â”‚
    (SCL)           â”‚                 â”‚
                    â”‚                 â”‚
    GPS TX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ GPIO 16 (RX2)   â”‚
                    â”‚                 â”‚
    GPS RX â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ GPIO 17 (TX2)   â”‚
                    â”‚                 â”‚
         5V â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 5V              â”‚
                    â”‚                 â”‚
                    â”‚      ESP32      â”‚
                    â”‚    Dev Module   â”‚
                    â”‚                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Sensor Communication Protocols

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Communication Protocols            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  DS18B20:                                   â”‚
â”‚  â€¢ Protocol: 1-Wire (OneWire)              â”‚
â”‚  â€¢ Data Pin: GPIO 4                        â”‚
â”‚  â€¢ Pull-up: 4.7kÎ© to 3.3V                 â”‚
â”‚  â€¢ Speed: 15.4 kbps                        â”‚
â”‚                                             â”‚
â”‚  MPU6050:                                   â”‚
â”‚  â€¢ Protocol: I2C                           â”‚
â”‚  â€¢ Address: 0x68                           â”‚
â”‚  â€¢ SDA: GPIO 21                            â”‚
â”‚  â€¢ SCL: GPIO 22                            â”‚
â”‚  â€¢ Speed: 400 kHz (Fast Mode)              â”‚
â”‚                                             â”‚
â”‚  NEO-6M GPS:                                â”‚
â”‚  â€¢ Protocol: UART (Serial)                 â”‚
â”‚  â€¢ Baud Rate: 9600                         â”‚
â”‚  â€¢ TX â†’ ESP32 RX2 (GPIO 16)                â”‚
â”‚  â€¢ RX â†’ ESP32 TX2 (GPIO 17)                â”‚
â”‚  â€¢ Format: NMEA 0183                       â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ Software Architecture

### Backend API Structure

```
backend/
â”‚
â”œâ”€â”€ app.py (Main Flask Application)
â”‚   â”‚
â”‚   â”œâ”€â”€ Route Handlers
â”‚   â”‚   â”œâ”€â”€ / (Home)
â”‚   â”‚   â”œâ”€â”€ /dashboard
â”‚   â”‚   â””â”€â”€ /mobile
â”‚   â”‚
â”‚   â”œâ”€â”€ API Endpoints
â”‚   â”‚   â”œâ”€â”€ /api/health
â”‚   â”‚   â”œâ”€â”€ /api/predict-fertility
â”‚   â”‚   â”œâ”€â”€ /api/health-check
â”‚   â”‚   â”œâ”€â”€ /api/behavior-analysis
â”‚   â”‚   â”œâ”€â”€ /api/location-update
â”‚   â”‚   â”œâ”€â”€ /api/emergency-check
â”‚   â”‚   â”œâ”€â”€ /api/sensor-data
â”‚   â”‚   â”œâ”€â”€ /api/alerts
â”‚   â”‚   â”œâ”€â”€ /api/dog-profile/<name>
â”‚   â”‚   â”œâ”€â”€ /api/breeds
â”‚   â”‚   â””â”€â”€ /api/statistics
â”‚   â”‚
â”‚   â”œâ”€â”€ Helper Functions
â”‚   â”‚   â”œâ”€â”€ calculate_distance()
â”‚   â”‚   â”œâ”€â”€ get_health_recommendations()
â”‚   â”‚   â””â”€â”€ calculate_stress_level()
â”‚   â”‚
â”‚   â””â”€â”€ Data Storage
â”‚       â”œâ”€â”€ sensor_data_buffer (deque)
â”‚       â”œâ”€â”€ alert_history (deque)
â”‚       â””â”€â”€ dog_profiles (dict)
â”‚
â””â”€â”€ config.py (Configuration)
    â”œâ”€â”€ Health Thresholds
    â”œâ”€â”€ API Settings
    â”œâ”€â”€ Model Paths
    â””â”€â”€ CORS Settings
```

### Mobile App Structure

```
mobile-app/
â”‚
â””â”€â”€ main.py (Kivy Application)
    â”‚
    â”œâ”€â”€ CanineCareApp (Main App)
    â”‚
    â”œâ”€â”€ Screens
    â”‚   â”œâ”€â”€ HomeScreen
    â”‚   â”‚   â”œâ”€â”€ Dog name input
    â”‚   â”‚   â”œâ”€â”€ Real-time displays
    â”‚   â”‚   â”œâ”€â”€ Navigation buttons
    â”‚   â”‚   â””â”€â”€ Auto-refresh (10s)
    â”‚   â”‚
    â”‚   â”œâ”€â”€ HealthScreen
    â”‚   â”‚   â”œâ”€â”€ Input fields
    â”‚   â”‚   â”œâ”€â”€ Check button
    â”‚   â”‚   â””â”€â”€ Results display
    â”‚   â”‚
    â”‚   â”œâ”€â”€ FertilityScreen
    â”‚   â”‚   â”œâ”€â”€ Breed input
    â”‚   â”‚   â”œâ”€â”€ Age/Weight inputs
    â”‚   â”‚   â”œâ”€â”€ Predict button
    â”‚   â”‚   â””â”€â”€ Results display
    â”‚   â”‚
    â”‚   â”œâ”€â”€ LocationScreen
    â”‚   â”‚   â”œâ”€â”€ GPS display
    â”‚   â”‚   â”œâ”€â”€ Safe zone status
    â”‚   â”‚   â””â”€â”€ Refresh button
    â”‚   â”‚
    â”‚   â””â”€â”€ AlertsScreen
    â”‚       â”œâ”€â”€ Alert list
    â”‚       â””â”€â”€ Refresh button
    â”‚
    â””â”€â”€ API Communication
        â””â”€â”€ requests to BACKEND_URL
```

### ML Model Architecture

```
ml/
â”‚
â”œâ”€â”€ train_models.py
â”‚   â”‚
â”‚   â”œâ”€â”€ CanineHealthPredictor Class
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ load_and_prepare_data()
â”‚   â”‚   â”‚   â”œâ”€â”€ Load CSV
â”‚   â”‚   â”‚   â”œâ”€â”€ Encode breeds
â”‚   â”‚   â”‚   â””â”€â”€ Clean data
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ create_advanced_features()
â”‚   â”‚   â”‚   â”œâ”€â”€ Weight categories
â”‚   â”‚   â”‚   â”œâ”€â”€ Age categories
â”‚   â”‚   â”‚   â””â”€â”€ Interaction features
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ train_first_heat_model()
â”‚   â”‚   â”‚   â”œâ”€â”€ Random Forest
â”‚   â”‚   â”‚   â”œâ”€â”€ Gradient Boosting
â”‚   â”‚   â”‚   â”œâ”€â”€ Ridge Regression
â”‚   â”‚   â”‚   â””â”€â”€ Voting Ensemble
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ train_next_heat_model()
â”‚   â”‚   â”‚   â”œâ”€â”€ Random Forest
â”‚   â”‚   â”‚   â”œâ”€â”€ Gradient Boosting
â”‚   â”‚   â”‚   â”œâ”€â”€ Ridge Regression
â”‚   â”‚   â”‚   â””â”€â”€ Voting Ensemble
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ save_models()
â”‚   â”‚       â”œâ”€â”€ First_Heat_Best_Model.pkl
â”‚   â”‚       â”œâ”€â”€ Next_Heat_Best_Model.pkl
â”‚   â”‚       â””â”€â”€ breed_mapping.pkl
â”‚   â”‚
â”‚   â””â”€â”€ models/ (Saved Models)
â”‚
â””â”€â”€ data/
    â””â”€â”€ dog.csv (Training Data)
```

---

## ğŸŒ Network Architecture

### Local Network Setup

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              WiFi Router                     â”‚
â”‚         (192.168.1.1)                       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚
     â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ESP32  â”‚   â”‚Computer â”‚   â”‚   Phone     â”‚
â”‚ Device  â”‚   â”‚ Backend â”‚   â”‚ Mobile App  â”‚
â”‚         â”‚   â”‚         â”‚   â”‚             â”‚
â”‚192.168  â”‚   â”‚192.168  â”‚   â”‚192.168.1.X  â”‚
â”‚  .1.X   â”‚   â”‚ .1.100  â”‚   â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚              â”‚              â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
              HTTP/REST API
           (Port 5000)
```

### Cloud Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Local Network                      â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  ESP32  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚   Backend   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTPS
                              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ThingSpeak     â”‚
                    â”‚   IoT Cloud      â”‚
                    â”‚                  â”‚
                    â”‚  â€¢ Data Logging  â”‚
                    â”‚  â€¢ Visualization â”‚
                    â”‚  â€¢ API Access    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security Architecture

### Current Security Model

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Security Layers                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  Network Level:                             â”‚
â”‚  â€¢ Local WiFi (WPA2)                       â”‚
â”‚  â€¢ Same network requirement                â”‚
â”‚                                             â”‚
â”‚  Application Level:                         â”‚
â”‚  â€¢ Input validation                        â”‚
â”‚  â€¢ Data sanitization                       â”‚
â”‚  â€¢ Error handling                          â”‚
â”‚                                             â”‚
â”‚  Data Level:                                â”‚
â”‚  â€¢ In-memory storage                       â”‚
â”‚  â€¢ No persistent sensitive data            â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Future Security Enhancements

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Enhanced Security (Future)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  Authentication:                            â”‚
â”‚  â€¢ User login/registration                 â”‚
â”‚  â€¢ JWT tokens                              â”‚
â”‚  â€¢ API key management                      â”‚
â”‚                                             â”‚
â”‚  Encryption:                                â”‚
â”‚  â€¢ HTTPS/TLS                               â”‚
â”‚  â€¢ Data encryption at rest                 â”‚
â”‚  â€¢ Encrypted communications                â”‚
â”‚                                             â”‚
â”‚  Access Control:                            â”‚
â”‚  â€¢ Role-based access                       â”‚
â”‚  â€¢ Multi-user support                      â”‚
â”‚  â€¢ Device authorization                    â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Architecture

### Data Flow & Storage

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Data Pipeline                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Sensor Reading
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ESP32     â”‚
â”‚  Validate   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Format    â”‚
â”‚    JSON     â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Transmit   â”‚
â”‚   (HTTP)    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Backend Server           â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  sensor_data_buffer      â”‚  â”‚
â”‚  â”‚  (deque, maxlen=100)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  alert_history           â”‚  â”‚
â”‚  â”‚  (deque, maxlen=200)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  dog_profiles            â”‚  â”‚
â”‚  â”‚  (dict)                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Mobile    â”‚
â”‚     App     â”‚
â”‚   Display   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ System Performance

### Performance Metrics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Performance Characteristics         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  ESP32:                                     â”‚
â”‚  â€¢ Sensor read interval: 100ms             â”‚
â”‚  â€¢ Data send interval: 15 seconds          â”‚
â”‚  â€¢ WiFi reconnect: Automatic               â”‚
â”‚                                             â”‚
â”‚  Backend:                                   â”‚
â”‚  â€¢ API response time: <100ms               â”‚
â”‚  â€¢ ML inference time: <50ms                â”‚
â”‚  â€¢ Concurrent requests: 100+               â”‚
â”‚                                             â”‚
â”‚  Mobile App:                                â”‚
â”‚  â€¢ UI refresh rate: 10 seconds             â”‚
â”‚  â€¢ API timeout: 5 seconds                  â”‚
â”‚  â€¢ Offline mode: Graceful degradation      â”‚
â”‚                                             â”‚
â”‚  Accuracy:                                  â”‚
â”‚  â€¢ Temperature: Â±0.5Â°C                     â”‚
â”‚  â€¢ GPS: Â±5 meters                          â”‚
â”‚  â€¢ Activity: Â±5%                           â”‚
â”‚  â€¢ ML predictions: RÂ² > 0.78               â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**ğŸ—ï¸ CanineCare+ - Robust, Scalable, and Reliable Architecture**
